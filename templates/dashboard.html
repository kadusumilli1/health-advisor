{% extends "base.html" %}

{% block title %}Dashboard - Health Advisor{% endblock %}

{% block content %}
<h2>Welcome, {{ user_name }}!</h2>

{% if show_profile_prompt %}
<div class="alert alert-info">
    <strong>Get Personalized Health Insights!</strong><br>
    Complete your <a href="{{ url_for('profile') }}">profile</a> with age, sex, and race/ethnicity information to receive more accurate health recommendations based on your demographics.
</div>
{% endif %}

<div class="upload-section">
    <h3>Upload Health Results</h3>
    <form method="POST" action="{{ url_for('upload_file') }}" enctype="multipart/form-data">
        <div class="form-group">
            <label for="file">Select health test results file:</label>
            <input type="file" id="file" name="file" accept=".pdf,.jpg,.jpeg,.png,.txt,.doc,.docx" required>
        </div>
        <button type="submit">Upload File</button>
    </form>
</div>

<div class="file-list">
    <h3>Your Health Files</h3>
    {% if files %}
        {% for file in files %}
        <div class="file-item">
            <div class="file-info">
                <strong>{{ file.original_filename }}</strong><br>
                <small>Uploaded: {{ file.uploaded_at[:19] }}</small>
            </div>
            <div class="file-actions">
                <form method="POST" action="{{ url_for('delete_file', filename=file.filename) }}" class="delete-form">
                    <button type="submit" class="delete-button" onclick="return confirm('Are you sure you want to delete this file?')">Delete</button>
                </form>
            </div>
        </div>
        {% endfor %}
    {% else %}
        <p>No files uploaded yet. Upload your first health test results above!</p>
    {% endif %}
</div>
{% endblock %}